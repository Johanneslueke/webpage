name: Semantic Release Version Evaluator

on:
  push:
    branches:
      - main

jobs:
  semantic-release:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Evaluate next release version
      id: release
      uses: Sujimohi/semantic-release-action@v1
      with:
        branches: |
          +([0-9])?(.{+([0-9]),x}).x
          main
          next
          next-major
          { "name": "alpha", "prerelease": true }
          { "name": "beta", "prerelease": true }
        plugins: |
          @semantic-release/commit-analyzer
          @semantic-release/release-notes-generator
        tagFormat: 'v${version}'
      
    - name: Get the output
      run: |
        echo "Version: ${{ steps.release.outputs.version }}"
        echo "Tag: ${{ steps.release.outputs.tag }}"
        echo "Name: ${{ steps.release.outputs.name }}"
        echo "Notes: ${{ steps.release.outputs.notes }}"
        echo "Type: ${{ steps.release.outputs.type }}"
        echo "Channel: ${{ steps.release.outputs.channel }}"
